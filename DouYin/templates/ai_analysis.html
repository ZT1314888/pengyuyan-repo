{% extends 'base.html' %}

{% block content %}
<div class="page-content">
    <!-- 页面标题 -->
    {% include 'components/page_header.html' with icon='fa-lightbulb-o' title='AI智能分析建议' %}

    <!-- 整体数据统计 -->
    <div class="stats-overview">
        {% include 'components/stat_card.html' with color_class='blue' icon='fa-thumbs-up' label='平均点赞数' value=overall_stats.avg_like|default:0|floatformat:0 %}
        {% include 'components/stat_card.html' with color_class='green' icon='fa-comments' label='平均评论数' value=overall_stats.avg_comment|default:0|floatformat:0 %}
        {% include 'components/stat_card.html' with color_class='orange' icon='fa-star' label='平均收藏数' value=overall_stats.avg_collect|default:0|floatformat:0 %}
        {% include 'components/stat_card.html' with color_class='purple' icon='fa-share' label='平均分享数' value=overall_stats.avg_share|default:0|floatformat:0 %}
    </div>

    <!-- 对比分析 -->
    <div class="comparison-container">
        <div class="comparison-header">
            <i class="fa fa-bar-chart"></i>
            <h2>高表现视频 vs 平均水平</h2>
        </div>
        <div class="comparison-grid">
            <div class="comparison-item">
                <div class="comparison-label">高表现视频平均点赞</div>
                <div class="comparison-value">{{ high_performance.avg_like|floatformat:0 }}</div>
                <div class="comparison-diff positive">
                    <i class="fa fa-arrow-up"></i>
                    高出平均 {{ comparison_data.like_diff }}
                </div>
            </div>

            <div class="comparison-item">
                <div class="comparison-label">高表现视频平均评论</div>
                <div class="comparison-value">{{ high_performance.avg_comment|floatformat:0 }}</div>
                <div class="comparison-diff positive">
                    <i class="fa fa-arrow-up"></i>
                    高出平均 {{ comparison_data.comment_diff }}
                </div>
            </div>

            <div class="comparison-item">
                <div class="comparison-label">高表现视频平均收藏</div>
                <div class="comparison-value">{{ high_performance.avg_collect|floatformat:0 }}</div>
                <div class="comparison-diff positive">
                    <i class="fa fa-arrow-up"></i>
                    高出平均 {{ comparison_data.collect_diff }}
                </div>
            </div>

            <div class="comparison-item">
                <div class="comparison-label">高表现视频平均粉丝</div>
                <div class="comparison-value">{{ high_performance.avg_fans|floatformat:0 }}</div>
                <div class="comparison-diff positive">
                    <i class="fa fa-users"></i>
                    粉丝基础良好
                </div>
            </div>
        </div>
    </div>

    <!-- AI建议 -->
    <div class="suggestions-container">
        {% for suggestion in suggestions %}
            {% include 'components/suggestion_card.html' with type=suggestion.type icon=suggestion.icon title=suggestion.title description=suggestion.description priority=suggestion.priority %}
        {% endfor %}
    </div>
</div>
{% endblock %}
