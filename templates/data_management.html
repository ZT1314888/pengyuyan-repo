{% extends 'base.html' %}

{% block extra_style %}
<style>
    .page-header {
        display: flex;
        align-items: center;
        margin-bottom: 24px;
    }

    .page-header i {
        font-size: 28px;
        color: #5470c6;
        margin-right: 12px;
    }

    .page-header h1 {
        font-size: 24px;
        font-weight: 600;
        color: #333;
        margin: 0;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 24px;
    }

    .stat-card {
        background: #fff;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        text-align: center;
        transition: all 0.3s;
    }

    .stat-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }

    .stat-card .icon {
        width: 60px;
        height: 60px;
        margin: 0 auto 16px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        color: #fff;
    }

    .stat-card.blue .icon {
        background: linear-gradient(135deg, #5470c6, #91cc75);
    }

    .stat-card.green .icon {
        background: linear-gradient(135deg, #10b981, #34d399);
    }

    .stat-card.orange .icon {
        background: linear-gradient(135deg, #f59e0b, #fbbf24);
    }

    .stat-card .label {
        font-size: 14px;
        color: #666;
        margin-bottom: 8px;
    }

    .stat-card .value {
        font-size: 32px;
        font-weight: 700;
        color: #333;
    }

    .data-table-container {
        background: #fff;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        margin-bottom: 24px;
    }

    .data-table-container h3 {
        margin: 0 0 20px 0;
        font-size: 18px;
        color: #333;
        display: flex;
        align-items: center;
    }

    .data-table-container h3 i {
        margin-right: 8px;
        color: #5470c6;
    }

    .data-table {
        width: 100%;
        border-collapse: collapse;
    }

    .data-table thead {
        background: #f8f9fc;
    }

    .data-table th {
        padding: 12px;
        text-align: left;
        font-weight: 600;
        color: #666;
        border-bottom: 2px solid #e3e6f0;
    }

    .data-table td {
        padding: 12px;
        border-bottom: 1px solid #f0f0f0;
        color: #666;
    }

    .data-table tbody tr:hover {
        background: #f8f9fc;
    }

    .text-truncate {
        max-width: 300px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    @media (max-width: 992px) {
        .stats-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="page-content">
    <div class="page-header">
        <i class="fa fa-database"></i>
        <h1>数据信息管理</h1>
    </div>

    <!-- 统计卡片 -->
    <div class="stats-grid">
        <div class="stat-card blue">
            <div class="icon"><i class="fa fa-video-camera"></i></div>
            <div class="label">视频总数</div>
            <div class="value">{{ video_count }}</div>
        </div>
        <div class="stat-card green">
            <div class="icon"><i class="fa fa-comments"></i></div>
            <div class="label">评论总数</div>
            <div class="value">{{ comment_count }}</div>
        </div>
        <div class="stat-card orange">
            <div class="icon"><i class="fa fa-users"></i></div>
            <div class="label">用户总数</div>
            <div class="value">{{ user_count }}</div>
        </div>
    </div>

    <div class="data-table-container">
        <h3><i class="fa fa-video-camera"></i>视频数据</h3>
        <table class="data-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>视频描述</th>
                    <th>作者</th>
                    <th>点赞数</th>
                    <th>评论数</th>
                    <th>发布时间</th>
                </tr>
            </thead>
            <tbody>
                {% for video in recent_videos %}
                <tr>
                    <td>{{ video.id }}</td>
                    <td class="text-truncate" title="{{ video.description }}">{{ video.description|default:"无描述" }}</td>
                    <td>{{ video.username|default:"未知" }}</td>
                    <td>{{ video.likeCount|default:0 }}</td>
                    <td>{{ video.commentCount|default:0 }}</td>
                    <td>{{ video.publishTime|default:"未知" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>


    <div class="data-table-container">
        <h3><i class="fa fa-comments"></i>评论数据</h3>
        <table class="data-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>用户名</th>
                    <th>评论内容</th>
                    <th>IP地址</th>
                    <th>点赞数</th>
                    <th>评论时间</th>
                </tr>
            </thead>
            <tbody>
                {% for comment in recent_comments %}
                <tr>
                    <td>{{ comment.id }}</td>
                    <td>{{ comment.username|default:"未知" }}</td>
                    <td class="text-truncate" title="{{ comment.content }}">{{ comment.content|default:"无内容" }}</td>
                    <td>{{ comment.userIP|default:"未知" }}</td>
                    <td>{{ comment.likeCount|default:0 }}</td>
                    <td>{{ comment.commentTime|default:"未知" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
